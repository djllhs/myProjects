<!DOCTYPE html>
<html lang="zh-Hans">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="djllhs" />



<meta name="description" content="任何语言都需要强调编码风格的一致性。增强代码的可读性，可维护性是相当重要的。本书讲述的技巧和技术比较实用。">
<meta name="keywords" content="代码规范">
<meta property="og:type" content="article">
<meta property="og:title" content="阅读《编写维护的javascript》一书简要笔记">
<meta property="og:url" content="http://djllhs.net/2017/05/26/javascript standard/index.html">
<meta property="og:site_name" content="You and me">
<meta property="og:description" content="任何语言都需要强调编码风格的一致性。增强代码的可读性，可维护性是相当重要的。本书讲述的技巧和技术比较实用。">
<meta property="og:updated_time" content="2017-05-31T09:49:26.484Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="阅读《编写维护的javascript》一书简要笔记">
<meta name="twitter:description" content="任何语言都需要强调编码风格的一致性。增强代码的可读性，可维护性是相当重要的。本书讲述的技巧和技术比较实用。">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="You and me" type="application/atom+xml">



    <link rel="shortcut icon" href="/bitbug_favicon.ico">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>阅读《编写维护的javascript》一书简要笔记 | You and me</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
<div id="container">
  <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/author.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">djllhs</a></h1>
        </hgroup>

        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/index.html">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/index.html">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:123@123.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="https://github.com/djllhs" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Atom/">Atom</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/questions/">questions</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/service/">service</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sublime-text3/">sublime text3</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/代码规范/">代码规范</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="http://lizhhub.com">Zhuixun</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">俗称的女汉子，拥有一个彪悍的内心，不羁的性格。当然，从外表上看是猜不出来这妹纸是个程序员滴~我的生活理念：生活要充满色彩，充满乐趣，做一个不一样的技术性妹纸</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
  </div>
  <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">djllhs</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/author.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">djllhs</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/index.html">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/index.html">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:123@123.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/djllhs" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
    <div class="body-wrap"><article id="post-javascript standard" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/05/26/javascript standard/index.html" class="article-date">
      <time datetime="2017-05-26T07:12:36.604Z" itemprop="datePublished">2017-05-26</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      阅读《编写维护的javascript》一书简要笔记
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/JavaScript/">JavaScript</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/代码规范/">代码规范</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>任何语言都需要强调编码风格的一致性。增强代码的可读性，可维护性是相当重要的。本书讲述的技巧和技术比较实用。<br><a id="more"></a></p>
<h2 id="一、基本的格式化"><a href="#一、基本的格式化" class="headerlink" title="一、基本的格式化"></a>一、基本的格式化</h2><ol>
<li>代码缩进，建议4个空格字符为一个缩进层次，或使用tab缩进（一般编辑器默认为4个空格）；</li>
<li>语句结尾，建议不要省略分号；</li>
<li>行的长度，建议不超过80个字符；</li>
<li>换行，通常在运算符后换行，下一行会增加两个层级的缩进。例外，当给变量赋值时，第二行的位置应当和赋值运算符的位置保持对齐；</li>
<li>空行<ul>
<li>在方法之间。</li>
<li>在方法中的局部变量和第一条语句之间。</li>
<li>在多行或单行注释之前。</li>
<li>在方法内的逻辑片段之间插入空行。</li>
</ul>
</li>
<li>命名，通常采用驼峰式命名。<ul>
<li>变量名，驼峰命名，前缀为名词，如myName。</li>
<li>函数和方法名，驼峰命名，前缀为动词，如isEnabled</li>
<li>常量，使用大写字母和下划线来命名，下划线用以分隔单词，如MAX_COUNT。</li>
<li>构造函数，大驼峰命名，常为名词（前面一般会有new运算符），如Person。</li>
<li>直接量，<ul>
<li>字符串，双引号或单引号括起来，多行时，使用 + 连接；</li>
<li>数字，禁止八进制直接量；</li>
<li>null，可看成对象的占位符。<br>*　undefined，禁止使用特殊值undefined，可有效地确保只有一种情况下typeof才会返回”undefined“；当变量未声明时，若使用了一个可能赋值为一个对象的变量事，将其赋值为null。</li>
<li>对象直接量，直接将所有的属性写在花括号里。</li>
<li>数组直接量，使用方括号将数组初始元素括起来。</li>
<li>对象直接量，直接将所有的属性写在花括号里。</li>
<li>数组直接量，使用方括号将数组初始元素括起来。</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 id="二、注释"><a href="#二、注释" class="headerlink" title="二、注释"></a>二、注释</h2><ol>
<li>单行注释，// 这是单行注释。 （三种使用方式）<ul>
<li>独占一行，解释下一行代码。这行注释之前总有一个空行，且缩进和下一行代码保持一致。</li>
<li>在代码行的尾部，代码结束到注释之间至少有一个缩进。注：代码及注释不应超过单行最大字符数限制，若超过，则将注释提于代码行上方。</li>
<li>注释大段代码</li>
</ul>
</li>
<li>多行注释，以斜杠加星号开头，星号加斜杠结束。总在代码段之前，注释和代码之间没有空行间隔。多行注释前应有空行，且缩进和要描述的代码一致。</li>
<li>使用注释，一般原则是在需要让代码变得更清晰时添加注释。<ul>
<li>代码难于理解时使用。</li>
<li>代码可能被文认为是错误的时使用。     </li>
<li>代码为浏览器特性hack时使用。</li>
</ul>
</li>
<li>文档注释，以斜杠加两个星号开头，接下来是描述信息，其中使用@符号来表示一个或多个属性。使用时，应该确保对如下内容添加注释。<ul>
<li>所有的方法，应当对方法、期望的参数和可能的返回值添加注释描述。</li>
<li>所有的构造函数，应当对自定义类型和期望的参数添加注释描述。</li>
<li>所有包含文档化方法的对象，若一个对象包含一个或多个附带文档注释的方法，则也应适当地针对文档生成工具添加文档注释。</li>
</ul>
</li>
</ol>
<h2 id="三、语句和表达式"><a href="#三、语句和表达式" class="headerlink" title="三、语句和表达式"></a>三、语句和表达式</h2><ol>
<li><p>花括号的对齐方式：</p>
<ul>
<li><p>左花括号放置在块语句中第一句代码的末尾（推荐）</p>
<pre><code>if(condition) {
    doSomething();
} else {
    doSomething();
}
</code></pre></li>
<li><p>左花括号放置于块语句首行的下一行</p>
<pre><code>if (condition)
{
    doSomething();
}
else
{
    doSomething();
}
</code></pre></li>
</ul>
</li>
<li><p>块语句间隔</p>
<ul>
<li><p>在语句名、圆括号和左花括号之间没有空格间隔。</p>
<pre><code>if(condition){
    doSomething();
}
</code></pre></li>
<li><p>在括左圆括号之前和右圆括号之后各加一个空格。(推荐)</p>
<pre><code>if (condition) {
    doSomething();
}
</code></pre></li>
<li><p>在左圆括号后和右圆括号前各添加一个空格。</p>
<pre><code>if ( condition ) {
    doSomething();
}
</code></pre></li>
</ul>
</li>
<li><p>switch语句</p>
<ul>
<li>缩进：<ul>
<li>每条case语句相对于switch关键字都缩进一个层级</li>
<li>从第二天case语句开始，每条case语句前后各有一个空行</li>
</ul>
</li>
<li>case语句的“连续执行”，即case语句结束后不添加break之类的结尾。 只要加上合适的注释，是可以不加结尾的。</li>
</ul>
</li>
<li><p>for循环</p>
<ul>
<li>使用break可立即退出循环</li>
<li>使用continue可立即退出本次循环</li>
</ul>
</li>
<li><p>for-in循环，遍历对象属性，返回属性名，不应该遍历数组。使用hasOwnProperty（）过滤出实例属性</p>
</li>
</ol>
<h2 id="四、变量、函数和运算符"><a href="#四、变量、函数和运算符" class="headerlink" title="四、变量、函数和运算符"></a>四、变量、函数和运算符</h2><ol>
<li><p>变量声明</p>
<ul>
<li>局部变量放在函数首顶部</li>
<li>使用单var语句</li>
</ul>
</li>
<li><p>函数声明</p>
<ul>
<li>先声明后使用函数</li>
<li>函数声明应当在条件语句外部使用</li>
</ul>
</li>
<li><p>函数调用间隔</p>
<ul>
<li><p>左括号之后和右括号之前加上空格</p>
<pre><code>doSomething(function() {});
doSomething({ item: item });
doSomething([ item ]);
doSomething(&apos;hi&apos;);
</code></pre></li>
</ul>
</li>
<li><p>立即调用的函数 将函数用圆括号包裹起来</p>
<pre><code>var value = (function() {
    // 函数体
    return {
        messgae: &apos;hi&apos;
    }
}());
</code></pre></li>
<li><p>严格模式 ‘use strict’</p>
<ul>
<li>不用在全局作用域</li>
<li>多个函数应用严格模式可使用立即执行的函数</li>
</ul>
</li>
</ol>
<pre><code>(function() {
    &apos;use strict&apos;;
    function doSomething() {

    }
    function doSomethingElse() {

    }
})
</code></pre><ol>
<li>相等 推荐用 === 和 !== ,不涉及强转</li>
</ol>
<h2 id="五、UI层的松耦合"><a href="#五、UI层的松耦合" class="headerlink" title="五、UI层的松耦合"></a>五、UI层的松耦合</h2><ol>
<li>松耦合：修改一个组件而不需要更改其他组件</li>
<li>将JavaScript从css中抽离（避免使用css表达式）</li>
<li>将css从JavaScript中抽离（不应当直接操作样式）</li>
<li>将JavaScript从HTML中抽离（最好将所有的JavaScript代码都放入外置文件中）</li>
<li>将HTML从JavaScript中抽离<ul>
<li>从服务器加载，即将模板放置于远程服务器（大量），少量的标签可采用客户端模板</li>
<li>简单客户端模板，一些带“插槽”的标签片段，注释是和元素及文本一样的DOM节点；将模板数据嵌入 到HTML页面里的第二个方法是使用一个带有自定义type属性的script元素</li>
<li>复杂客户端模板，如Handlebars。</li>
</ul>
</li>
</ol>
<h2 id="六、避免使用全局变量"><a href="#六、避免使用全局变量" class="headerlink" title="六、避免使用全局变量"></a>六、避免使用全局变量</h2><ol>
<li><p>全局变量带来的问题</p>
<ul>
<li>命名冲突</li>
<li>代码的脆弱性，当定义函数时，最好尽可能多的将数据置于局部作用域内</li>
<li>难以测试，确保函数不会对全部变量有依赖，增强代码的可测性</li>
</ul>
</li>
<li><p>意外的全局变量</p>
<ul>
<li>总是使用var来定义变量，哪怕是定义全部变量</li>
<li>给未声明的变量赋值，使用工具时会报警告。严格模式下会报错</li>
</ul>
</li>
<li><p>单全局变量方式， 最佳方法是依赖尽可能少的全局变量，即只创建一个全局变量。如jQuery</p>
<ul>
<li>命名空间，将功能按照命名空间进行分组</li>
<li>模块，一种通用的功能片段，如YUI，AMD等。使用AMD，需要模块加载器，如Dojs，RequireJs</li>
</ul>
</li>
<li><p>零全局变量， 使用一个立即执行的函数调用并将所有脚本放入其中</p>
</li>
</ol>
<h2 id="七、事件处理"><a href="#七、事件处理" class="headerlink" title="七、事件处理"></a>七、事件处理</h2><ol>
<li>隔离应用逻辑，将应用逻辑和事件处理的代码拆分开来</li>
<li>不要分发事件对象，最好让时间处理程序成为杰出到event对象的唯一函数。事件处理程序应当在进入应用逻辑之前针对event对象执行任何必要的操作，包括阻止默认事件或阻止事件冒泡，都应当直接包含在事件处理程序中</li>
</ol>
<h2 id="八、避免“空比较”"><a href="#八、避免“空比较”" class="headerlink" title="八、避免“空比较”"></a>八、避免“空比较”</h2><ol>
<li>检测原始值,使用typeof<ul>
<li>字符串，返回“string”</li>
<li>数字，返回“number”</li>
<li>布尔值，返回“boolean”</li>
<li>undefined，返回“undefined”</li>
</ul>
</li>
<li>检测引用值（对象），Object、Array、Date、Error,使用instanceof，语法 value instanceof constructor。 不仅检测构造这个对象的构造器，还检测原型链，也可检测自定义的类型。但是不检测函数和数组</li>
<li><p>检测函数，使用typeof，返回“function”。在IE8和更早版本的IE浏览器中，检测DOM节点，返回“Object”（可用in）</p>
<pre><code>if(&quot;querySelectorAll&quot; in document){
    //代码块
}
</code></pre></li>
<li>检测数组</li>
</ol>
<pre><code>function isArray(value) {
    return Object.prototype.toString.call(value) === &quot;[object Array]&quot;;
}
</code></pre><ol>
<li>检测属性，使用in，如果实例对象的属性存在、或者继承自对象的原型，dou返回true。若检测实例对象的某个属性时候存在，用hasOwnProperty（）方法。在IE8以及更早版本，DOM对象并非继承自Object。</li>
</ol>
<pre><code>//、如果沟不确定是否为DOM对象
if(&quot;hasOwnProperty&quot; in Object &amp;&amp; Object.hasOwnProperty(&apos;related&apos;)){
    // 代码块
}
</code></pre><h2 id="九、将配置数据从代码中分离出来"><a href="#九、将配置数据从代码中分离出来" class="headerlink" title="九、将配置数据从代码中分离出来"></a>九、将配置数据从代码中分离出来</h2><ol>
<li>配置数据，是应用中写死的值，如URL，需要展现给用户的字符串，重复的值，设置（比如每页的配置项），任何可能发生变更的值</li>
<li>抽离配置数据， 即将配置数据拿到外部</li>
<li>保存配置数据， 放在单独的文件中。存储数据方式，<ul>
<li>JSON 文件</li>
</ul>
</li>
</ol>
<pre><code>{
    &quot;MSG_INVALID_VALUE&quot;: &quot;Invalid value&quot;,
    &quot;URL_INVAILID&quot;: &quot;/errors/invalid.php&quot;,    
    &quot;CSS_SELECTED&quot;: &quot;selected&quot;
}
</code></pre><ul>
<li><p>JSONP, 将JSON结构用一个函数包装起来</p>
<pre><code>myFunc({
    &quot;MSG_INVALID_VALUE&quot;: &quot;Invalid value&quot;,
    &quot;URL_INVAILID&quot;: &quot;/errors/invalid.php&quot;,    
    &quot;CSS_SELECTED&quot;: &quot;selected&quot;
})
</code></pre></li>
<li><p>纯JavaScript，将JSON对象赋值为一个变量，这个变量会被程序用到</p>
<pre><code>var config = {
    &quot;MSG_INVALID_VALUE&quot;: &quot;Invalid value&quot;,
    &quot;URL_INVAILID&quot;: &quot;/errors/invalid.php&quot;,    
    &quot;CSS_SELECTED&quot;: &quot;selected&quot;
}
</code></pre></li>
</ul>
<h2 id="十、抛出自定义错误"><a href="#十、抛出自定义错误" class="headerlink" title="十、抛出自定义错误"></a>十、抛出自定义错误</h2><ol>
<li><p>在js中抛出错误，Error对象</p>
<pre><code>throw new Error(&quot;Something bad happened&quot;)
</code></pre><p>注：没有通过try-catch语句捕获，抛出任何值都将引发一个错误</p>
</li>
<li><p>抛出错误的好处，能够明确问题所在。推荐总是在错误消息中包含函数名称以及函数失败的原因</p>
</li>
<li>何时抛出错误，最佳地方在工具函数中。经验法则：<ul>
<li>一旦修复了一个很难调试的额错误，尝试增加一两个自定义错误</li>
<li>如果正在写代码，思考一下：“我希望[某些事情]不会发生，如果发生，代码会一团糟”</li>
<li>若在编写别人的代码，思考一下其使用方式，在特定的情况下抛出错误</li>
</ul>
</li>
<li><p>try-catch语句。可能引发错误的代码放在try块中，处理错误的代码放在catch中。finally放一定会被执行的代码</p>
<pre><code>try{
    SomethingThatMightCauseAnError();
}catch(ex){
    handleError(ex);
}finally{
    continueDoingOtherStuff();
}
</code></pre></li>
</ol>
<ol>
<li><p>错误类型</p>
<pre><code>Error  //所有错误的基本类型
EvalError  // 通过eval()函数执行代码发生错误时抛出
RangeError // 一个数字超出它的边界时抛出
ReferenceError // 期望的对象存在时抛出
SyntaxError // 给eval()函数传递的代码中有语法错误时抛出
TypeError  // 变量不是期望的类型时抛出
URIError // 给encodeURI()、encodeURIComponent()、decodeURI()或者decodeURIComponent()等函数传递格式非法的URI字符串时抛出
</code></pre></li>
</ol>
<h2 id="十一、不是你的对象不要动"><a href="#十一、不是你的对象不要动" class="headerlink" title="十一、不是你的对象不要动"></a>十一、不是你的对象不要动</h2><ol>
<li>什么是你的。若你的代码没有创建这些对象，不要修改它们。包括：<ul>
<li>原生对象（Object、Array 等）</li>
<li>DOM对象（如document）</li>
<li>浏览器对象模型（BOM）对象（例如，window）</li>
<li>类库的对象</li>
</ul>
</li>
<li><p>原则</p>
<ul>
<li><p>不覆盖方法</p>
<pre><code>// 不好的写法
document._originalGetElementById = document.getElementById;
document.getElementById = function (id) {
    if( id == &apos;window&apos;){
        return window;
    }else{
        return document._originalGetElementById(id);_
    }
};
</code></pre></li>
</ul>
</li>
</ol>
<ul>
<li>不新增方法</li>
</ul>
<pre><code>//不好的写法，在DOM对象上增加了方法
document.sayImAwesome = function() {
    alert(&quot;You&apos;re awesome&quot;);
}

// 不好的写法，在原生对象上增加了方法
Array.prototype.reverseSort = function() {
    return this.sort().reverse();
}

// 不好的写法，在库对象上增加了方法
YUI.doSomething = function() {
    // 代码
}
</code></pre><ul>
<li>不删除方法，一是给对应的名字赋值为null，二是使用delete操作符在删除（如果在prototype的属性或方法上使用delete是不起作用的）<ol>
<li>更好的途径，基于对象的继承和基于类型的继承</li>
</ol>
</li>
</ul>
<ul>
<li><p>基于对象的继承，也叫原型继承，一个对象继承另外一个对象是不需要调用构造函数的。如ECMAScript5的Object.create()方法</p>
<pre><code>var person = {
    name: &quot;Bob&quot;,
    sayName: function(){
        console.log(this.name);
    }
}
// 创建新对象 继承自person，可访问其属性和方法
var myPerson = Object.create(person);
myPerson.sayName();  // Bob

// 重新定义 myPerson.sayName，则切断对person.sayName的访问
myPerson.sayName = function(){
    console.log(&apos;mom&apos;);
}
myPerson.sayName(); // mom
person.sayName(); // Bob

// Object.create()可指定第二个参数，该参数对象中的属性和方法将添加到新的对象中
var myPerson = Object.create(person,{
    name: {
        value: &apos;Dad&apos;
    }
})
myPerson.sayName(); // Dad
person.sayName(); // Bob
</code></pre></li>
<li><p>基于类型的继承，通过构造函数实现，需要访问被继承对象的构造函数。需要两步：首先，原型继承；然后，构造器继承。构造器继承是调用超类的构造函数时传入新建的对象作为其this的值</p>
<pre><code>function Person(name){
    this.name;
}

function Author(name){
    Person.call(this,name); // 构造器继承
}

Author.prototype = new Person();
</code></pre></li>
<li><p>门面模式，为一个已存在的对象创建一个新的接口。门面实现一个特定的接口，让一个对象看起来像另一个对象，就称作适配器。门面和适配器唯一的不同是前者创建新接口，后者实现已存在的接口</p>
<pre><code>function DOMWrapper(ele){
    this.ele = ele;
}

DOMWrapper.prototype.addClass = function(className){
    ele.className += &quot; &quot; + className;
}

DOMWrapper.prototype.remove = function() {
    this.ele.parentNode.removeChild(this.ele);
}

var wrapper = new DOMWrapper(document.getElementById(&apos;my-div&apos;));
wrapper.addClass(&apos;selected&apos;);
wrapper.remove();
</code></pre></li>
</ul>
<ol>
<li><p>阻止修改，三种锁定修改的级别，每种都拥有两个方法：一个用来实施操作，一个用来检测是否应用了相应的操作</p>
<ul>
<li><p>防止扩展，禁止为对象“添加”属性和方法，但已存在的属性和方法是可以被修改或删除</p>
<pre><code>//Object.preventExtension(), Object.isExtensible()
var person = {
    name: &apos;bob&apos;
};
//锁定对象
Object.preventExtensions(person);
console.log(Object.isExtensible(person)); // false
person.age = 25; //正常情况悄悄的失败，除非在strict模式下抛出错误
</code></pre></li>
<li><p>密封，类似“防止扩展”，而且禁止为对象“删除”已存在的属性和方法</p>
<pre><code>//Object.seal()密封对象,Object.isSealed()
Object.seal(person);
console.log(Object.isExtensible(person)); // false
console.log(Object.isSealed(person)); // true
delete person.name; // false 正常情况悄悄的失败，除非是在strict模式下抛出错误
person.age = 25;
</code></pre></li>
<li><p>冻结，类似“密封”，而且禁止为对象“删除”已存在的属性和方法（所有字段均为只读）</p>
<pre><code>//Object.freeze()冻结，Object.isFrozen()
Object.freeze(person);
console.log(Object.isExtensible(person)); // false
console.log(Object.isSealed(person)); // true
console.log(Object.isFrozen(person)); // true
person.name = &apos;mom&apos;; //
person.age = 25; //同上
delete person.name; //同上

// 被冻结的对象同时也是不可扩展和被密封的，故调用Object.isExtensible()返回false，调用Object.isSealed()返回true
// 被冻结的对象和被密封的对象最大的区别在于，前者禁止任何对已存在属性和方法的修改
</code></pre></li>
</ul>
</li>
</ol>
<h2 id="十二、浏览器嗅探"><a href="#十二、浏览器嗅探" class="headerlink" title="十二、浏览器嗅探"></a>十二、浏览器嗅探</h2><ol>
<li><p>User-Agent检测（用户代理检测）<br>服务器介意获取到的浏览器的user-agent字符串，在客户端通过JavaScript的navigator.userAgent同样可以获取。为了保证JavaScript的正确执行，用户代理检测应该是没有办法的办法。如果要使用，最安全方法是只检测旧的浏览器。</p>
<p> if(isInternetExplorerOrEarlier){</p>
<pre><code>// 处理IE8以及更早版本
</code></pre><p> }else{</p>
<pre><code>// 处理其他浏览器
</code></pre><p> }</p>
</li>
<li><p>特性检测，为特定浏览器的特性进行测试，并仅当特性存在时即可饮用特性检测</p>
<p> function setAnimation(callback) {</p>
<pre><code>if(window.requestAnimationFrame){ // 标准
    return requestAnimationFrame(callback);
}else if(window.mozRequestAnimationFrame){ // Firefox
    return mozRequestAnimationFrame(callback);
}else if(window.webkitRequestAnimationFrame){ // Webkit
    return webkitRequestAnimationFrame(callback);
}else if(window.oRequestAnimationFrame){ // Opera
    return oRequestAnimationFrame(callback);
}else {
    return setTimeout(callback, 0);
}
</code></pre><p> }</p>
</li>
<li><p>避免特性推断<br>不能从一个特性的存在推断出另一个特性是否存在。最好的情况是两者有薄弱的联系，最坏的情况是两者根本没有直接关系</p>
</li>
<li>避免浏览器推断</li>
</ol>
<h2 id="十三、文件和目录结构"><a href="#十三、文件和目录结构" class="headerlink" title="十三、文件和目录结构"></a>十三、文件和目录结构</h2><ol>
<li>最佳实践</li>
</ol>
<ul>
<li>一个文件只包含一个对象</li>
<li>相关的文件用目录分组</li>
<li>保持第三方代码的独立</li>
<li>确定创建位置</li>
<li>保持测试代码的完整性</li>
</ul>
<ol>
<li>基本结构</li>
</ol>
<ul>
<li>build，放置最终构建后的文件，理想情况下这个目录不应该提交</li>
<li>src，放置所有的源文件，包括用来进行文件分组的子目录</li>
<li>test或者tests，放置所有的测试文件。通常包含一些同源代买目录一一对应的子目录或文件</li>
</ul>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2017/05/26/javascript standard/index.html">阅读《编写维护的javascript》一书简要笔记</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">djllhs</a></p>
        <p><span>发布时间:</span>2017-05-26, 15:12:36</p>
        <p><span>最后更新:</span>2017-05-31, 17:49:26</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2017/05/26/javascript standard/index.html" title="阅读《编写维护的javascript》一书简要笔记">http://djllhs.net/2017/05/26/javascript standard/index.html</a>
            <span class="copy-path" data-clipboard-text="原文: http://djllhs.net/2017/05/26/javascript standard/index.html　　作者: djllhs" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target = "_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2017/05/26/The Definitive Guide of javascript/index.html">
                    《JavaScript权威指南》笔记
                </a>
            </div>
        
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#一、基本的格式化"><span class="toc-number">1.</span> <span class="toc-text">一、基本的格式化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二、注释"><span class="toc-number">2.</span> <span class="toc-text">二、注释</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三、语句和表达式"><span class="toc-number">3.</span> <span class="toc-text">三、语句和表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四、变量、函数和运算符"><span class="toc-number">4.</span> <span class="toc-text">四、变量、函数和运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#五、UI层的松耦合"><span class="toc-number">5.</span> <span class="toc-text">五、UI层的松耦合</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#六、避免使用全局变量"><span class="toc-number">6.</span> <span class="toc-text">六、避免使用全局变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#七、事件处理"><span class="toc-number">7.</span> <span class="toc-text">七、事件处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#八、避免“空比较”"><span class="toc-number">8.</span> <span class="toc-text">八、避免“空比较”</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#九、将配置数据从代码中分离出来"><span class="toc-number">9.</span> <span class="toc-text">九、将配置数据从代码中分离出来</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十、抛出自定义错误"><span class="toc-number">10.</span> <span class="toc-text">十、抛出自定义错误</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十一、不是你的对象不要动"><span class="toc-number">11.</span> <span class="toc-text">十一、不是你的对象不要动</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十二、浏览器嗅探"><span class="toc-number">12.</span> <span class="toc-text">十二、浏览器嗅探</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#十三、文件和目录结构"><span class="toc-number">13.</span> <span class="toc-text">十三、文件和目录结构</span></a></li></ol>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录"  title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></i></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"阅读《编写维护的javascript》一书简要笔记　| You and me　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2017/05/26/The Definitive Guide of javascript/index.html" title="上一篇: 《JavaScript权威指南》笔记">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/" title="回到主页"><i class="fa fa-home"></i></a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/05/27/Atom-essays/index.html">Atom essays</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/27/sublime-text3-essays/index.html">sublime text3 快捷键</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/27/job-essays/index.html">工作随笔</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/26/oss-hexo-publish/index.html">oss+hexo 博客部署</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/26/The Definitive Guide of javascript/index.html">《JavaScript权威指南》笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/26/javascript standard/index.html">阅读《编写维护的javascript》一书简要笔记</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2017 djllhs
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
  </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 5;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
</div>
</body>
</html>